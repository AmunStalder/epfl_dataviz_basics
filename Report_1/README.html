<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Amun Stalder">

<title>Applied Data Science: Communication and Visualisation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="README_files/libs/clipboard/clipboard.min.js"></script>
<script src="README_files/libs/quarto-html/quarto.js"></script>
<script src="README_files/libs/quarto-html/popper.min.js"></script>
<script src="README_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="README_files/libs/quarto-html/anchor.min.js"></script>
<link href="README_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="README_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="README_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="README_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="README_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="README_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="README_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="README_files/libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="README_files/libs/typedarray-0.1/typedarray.min.js"></script>
<script src="README_files/libs/jquery-3.5.1/jquery.min.js"></script>
<link href="README_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="README_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="README_files/libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="README_files/libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Applied Data Science: Communication and Visualisation</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Amun Stalder </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Invalid Date</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>As part of the <em>Applied Data Science: Communication and Visualisation</em> course for the Certificate of Open Studies (COS) of the EPFL, the students show their aquired skills in small data science projects. This Markdown file is about the analysis of the SMI data set, which contains data about the stock market. There were 10 tasks to analyse this data set and visualize the results obtained from the analysis.</p>
</section>
<section id="analysing-the-data" class="level1">
<h1>Analysing the data</h1>
<section id="loading-the-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-the-data">Loading the data</h2>
<p>Firstly, we load the data using the {readr} package. We then take a look at the individual columns and transform them if needed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>df_smi_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/data_smi.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(df_smi_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,336
Columns: 2
$ date  &lt;chr&gt; "05.01.15", "06.01.15", "07.01.15", "08.01.15", "09.01.15", "12.…
$ price &lt;dbl&gt; 8938.85, 8874.47, 8900.83, 9139.69, 9105.70, 9152.97, 9285.63, 9…</code></pre>
</div>
</div>
<p>The data frame has 2 columns and 1336 rows.The date column seems to be a string, so let’s convert it to a date format using {lubridate}.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>df_smi <span class="ot">&lt;-</span> df_smi_raw <span class="sc">|&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">dmy</span>(date))</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(df_smi)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,336
Columns: 2
$ date  &lt;date&gt; 2015-01-05, 2015-01-06, 2015-01-07, 2015-01-08, 2015-01-09, 201…
$ price &lt;dbl&gt; 8938.85, 8874.47, 8900.83, 9139.69, 9105.70, 9152.97, 9285.63, 9…</code></pre>
</div>
</div>
<p>The columns are now in a format we can use. To check missing values, we can use the {visdat} package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(visdat)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>visdat<span class="sc">::</span><span class="fu">vis_dat</span>(df_smi)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="README_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>The data does not have any missing values.</p>
</section>
<section id="task-1-generating-a-lineplot" class="level2">
<h2 class="anchored" data-anchor-id="task-1-generating-a-lineplot">Task 1: Generating a lineplot</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>plot_smi_line <span class="ot">&lt;-</span> <span class="cf">function</span>(df, <span class="at">date_breaks=</span><span class="st">"1 year"</span>, <span class="at">angle =</span> <span class="cn">FALSE</span>, <span class="at">hline =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  checkmate<span class="sc">::</span><span class="fu">assert_data_frame</span>(df)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  checkmate<span class="sc">::</span><span class="fu">assert_character</span>(date_breaks)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  checkmate<span class="sc">::</span><span class="fu">assert_logical</span>(angle)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  checkmate<span class="sc">::</span><span class="fu">assert_logical</span>(hline)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  date_from <span class="ot">=</span> <span class="fu">format</span>(<span class="fu">min</span>(df<span class="sc">$</span>date), <span class="st">"%d %b %Y"</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  date_to <span class="ot">=</span> <span class="fu">format</span>(<span class="fu">max</span>(df<span class="sc">$</span>date), <span class="st">"%d %b %Y"</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"darkgreen"</span>) <span class="sc">+</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">"Daily SMI prices"</span>,</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="fu">paste0</span>(<span class="st">"From "</span>, date_from, <span class="st">" to "</span>, date_to),</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">"Daily Prices"</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">12000</span>, <span class="dv">2000</span>),</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>                       <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(df<span class="sc">$</span>price) <span class="sc">*</span> <span class="fl">1.2</span>),</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>                       <span class="at">minor_breaks =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_date</span>(<span class="at">date_breaks =</span> date_breaks,</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>                 <span class="at">date_labels =</span> <span class="fu">case_when</span>(</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>                   date_breaks <span class="sc">==</span> <span class="st">"1 year"</span> <span class="sc">~</span> <span class="st">"%Y"</span>,</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>                   date_breaks <span class="sc">==</span> <span class="st">"1 month"</span> <span class="sc">~</span> <span class="st">"%b %y"</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>                 ) ,</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>                 <span class="at">minor_breaks =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (angle) {</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>      p <span class="ot">=</span> p <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (hline) {</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>      p <span class="ot">=</span> p <span class="sc">+</span> <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">8900</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">1</span>)</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(p)</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_smi_line</span>(df_smi)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="README_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
<section id="task-2-generating-a-lineplot-from-2019-on" class="level2">
<h2 class="anchored" data-anchor-id="task-2-generating-a-lineplot-from-2019-on">Task 2: Generating a lineplot from 2019 on</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>df_smi_2019 <span class="ot">&lt;-</span> df_smi <span class="sc">|&gt;</span> <span class="fu">filter</span>(date <span class="sc">&gt;</span> <span class="st">"2018-12-31"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_smi_line</span>(df_smi_2019, <span class="at">date_breaks =</span> <span class="st">"1 month"</span>, <span class="at">angle =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="README_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
<section id="task-3-adding-a-horizontal-line-at-8900.-" class="level2">
<h2 class="anchored" data-anchor-id="task-3-adding-a-horizontal-line-at-8900.-">Task 3: Adding a horizontal line at 8900.-</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>p_2019_hline <span class="ot">&lt;-</span> <span class="fu">plot_smi_line</span>(df_smi_2019, <span class="at">date_breaks =</span> <span class="st">"1 month"</span>, <span class="at">angle =</span> <span class="cn">TRUE</span>, <span class="at">hline =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>p_2019_hline</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="README_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
<section id="task-4-adding-ggplotly-functionality-for-interactivity." class="level2">
<h2 class="anchored" data-anchor-id="task-4-adding-ggplotly-functionality-for-interactivity.">Task 4: Adding ggplotly functionality for interactivity.</h2>
<p>Additionally, we search for the the date in 2019 for which the SMI value was below CHF 8900 for the last time of the year. Then, find the date in 2020 for which the SMI value was below CHF 8900 for the first time of the year.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p_2019_hline)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-14ffce9d2799a0c9d6d3" style="width:100%;height:325px;"></div>
<script type="application/json" data-for="htmlwidget-14ffce9d2799a0c9d6d3">{"x":{"data":[{"x":[17899,17900,17903,17904,17905,17906,17907,17910,17911,17912,17913,17914,17917,17918,17919,17920,17921,17924,17925,17926,17927,17928,17931,17932,17933,17934,17935,17938,17939,17940,17941,17942,17945,17946,17947,17948,17949,17952,17953,17954,17955,17956,17959,17960,17961,17962,17963,17966,17967,17968,17969,17970,17973,17974,17975,17976,17977,17980,17981,17982,17983,17984,17987,17988,17989,17990,17991,17994,17995,17996,17997,17998,18001,18002,18003,18004,18009,18010,18011,18012,18015,18016,18018,18019,18022,18023,18024,18025,18026,18029,18030,18031,18032,18033,18036,18037,18038,18039,18040,18043,18044,18045,18047,18050,18051,18052,18053,18054,18058,18059,18060,18061,18064,18065,18066,18067,18068,18071,18072,18073,18074,18075,18078,18079,18080,18081,18082,18085,18086,18087,18088,18089,18092,18093,18094,18095,18096,18099,18100,18101,18102,18103,18106,18107,18108,18110,18113,18114,18115,18116,18117,18120,18121,18122,18123,18124,18127,18128,18129,18130,18131,18134,18135,18136,18137,18138,18141,18142,18143,18144,18145,18148,18149,18150,18151,18152,18155,18156,18157,18158,18159,18162,18163,18164,18165,18166,18169,18170,18171,18172,18173,18176,18177,18178,18179,18180,18183,18184,18185,18186,18187,18190,18191,18192,18193,18194,18197,18198,18199,18200,18201,18204,18205,18206,18207,18208,18211,18212,18213,18214,18215,18218,18219,18220,18221,18222,18225,18226,18227,18228,18229,18232,18233,18234,18235,18236,18239,18240,18241,18242,18243,18246,18247,18248,18249,18250,18253,18257,18260,18264,18267,18268,18269,18270,18271,18274,18275,18276,18277,18278,18281,18282,18283,18284,18285,18288,18289,18290,18291,18292,18295,18296,18297,18298,18299,18302,18303,18304,18305,18306,18309,18310,18311,18312,18313,18316,18317,18318,18319,18320,18323,18324,18325,18326,18327,18330,18331,18332,18333,18334,18337,18338,18339,18340,18341,18344,18345,18346,18347,18348,18351,18352,18353,18354,18355,18358,18359,18360,18361,18366,18367,18368,18369,18372,18373,18374,18375,18376,18379,18380,18381],"y":[8466.0097659999992,8608.5595699999994,8535.9501949999994,8629.4804690000001,8687.7099610000005,8801.4804690000001,8828.2197269999997,8760.3203130000002,8824.7304690000001,8873.7695309999999,8914.1396480000003,9023.9599610000005,9011.4101559999999,8966.3398440000001,8957.1904300000006,8937.3896480000003,8922.4902340000008,8857.8496090000008,8940.5195309999999,8965.7099610000005,8969.2695309999999,8996.3603519999997,9011.4804690000001,9150.5595699999994,9143,9035.9003909999992,9003.4101559999999,9068.6201170000004,9127.4003909999992,9164.0595699999994,9142.7099610000005,9242.1201170000004,9267.4599610000005,9256.1699219999991,9315.6298829999996,9333.5703130000002,9348.9296880000002,9398.3701170000004,9461.2099610000005,9412.1904300000006,9388.9404300000006,9412.0195309999999,9394.0498050000006,9399.1503909999992,9403.1601559999999,9324.5800780000009,9268.3603519999997,9341.3496090000008,9331.6201170000004,9387.4296880000002,9481.9003909999992,9483.0996090000008,9496.9296880000002,9525.9199219999991,9463.3203130000002,9454.0498050000006,9319.4199219999991,9305.5,9389.2998050000006,9390.5898440000001,9405.9296880000002,9477.8398440000001,9538.1103519999997,9536.5703130000002,9570.0898440000001,9563.7099610000005,9541.1503909999992,9547.3300780000009,9582.2197269999997,9556.3095699999994,9549.2597659999992,9484.9101559999999,9513.7099610000005,9579.8496090000008,9596.5996090000008,9571.2197269999997,9635.0703130000002,9655.6699219999991,9694.0595699999994,9724.2695309999999,9740.4804690000001,9769.7402340000008,9746.0595699999994,9741.9902340000008,9657.2402340000008,9577.3798829999996,9621.9599610000005,9430.2998050000006,9472.8300780000009,9363.1796880000002,9404.0800780000009,9480.7597659999992,9660.5898440000001,9659.0800780000009,9582.0800780000009,9624.1601559999999,9645.0400389999995,9594.3095699999994,9666.8896480000003,9712.9599610000005,9680.8701170000004,9541.9697269999997,9523.9804690000001,9602.7304690000001,9597.7099610000005,9658.6201170000004,9682.2900389999995,9749.1298829999996,9835.8701170000004,9859.7304690000001,9861.8300780000009,9847.6103519999997,9851.5703130000002,9988.5498050000006,9961.6503909999992,9978.5195309999999,9922.8300780000009,9898.8496090000008,9898.9003909999992,9838.1298829999996,9859.7597659999992,9898.2402340000008,9970,10020.929690000001,10066.530269999999,10066.48047,9980.2197269999997,9994.0996090000008,9961.3398440000001,9937.5595699999994,9879.5302730000003,9762.9804690000001,9808.5800780000009,9850.5195309999999,9942.0097659999992,10010.150390000001,9937.0302730000003,9922.3701170000004,9965.1503909999992,9907.6796880000002,9877.0302730000003,9968.0800780000009,9970.8701170000004,9890.9003909999992,9919.2695309999999,9803.6904300000006,9599.4296880000002,9553.8798829999996,9533.9804690000001,9751.5498050000006,9749.9199219999991,9760.0195309999999,9786.2402340000008,9628.4804690000001,9606.2597659999992,9728.3896480000003,9825.5898440000001,9770.3896480000003,9848.1103519999997,9805.5,9744.9804690000001,9715.8300780000009,9786.0800780000009,9758.1904300000006,9838.4804690000001,9895.6503909999992,9924.5400389999995,9852.7001949999994,9894.5996090000008,9983.0703130000002,10073.820309999999,10059.37012,10020.48047,10098.589840000001,10094.089840000001,10047.339840000001,9969.1904300000006,10013.820309999999,10018.839840000001,10064.45996,10056.83008,9997.3896480000003,9991.3095699999994,9914.8203130000002,10010.70996,10037.809569999999,10078.320309999999,9952.5,9757.2802730000003,9760.4404300000006,9827.7197269999997,9914.0595699999994,9800.2402340000008,9830.0498050000006,9903.0195309999999,10017.389649999999,9964.2402340000008,10048.75,10032.490229999999,10008.940430000001,9965.4902340000008,9991.4199219999991,10017.349609999999,10023.51953,10106.530269999999,10197.089840000001,10231.79981,10257.690430000001,10254.950199999999,10219.820309999999,10252.240229999999,10337.070309999999,10272.98047,10318.099609999999,10326.780269999999,10309.23047,10305.26953,10314.160159999999,10299.219730000001,10233.23047,10310.12012,10347.179690000001,10366.01953,10385.740229999999,10338.349609999999,10369.440430000001,10468.62012,10506.929690000001,10529.259770000001,10529.139649999999,10493.240229999999,10346.95996,10232.929690000001,10334.559569999999,10363.5,10463.87988,10434.889649999999,10390.530269999999,10405.309569999999,10451.360350000001,10429.26953,10541.66992,10538.889649999999,10556.740229999999,10575.150390000001,10679.37012,10724.339840000001,10730.150390000001,10616.940430000001,10699.820309999999,10665.410159999999,10683.66992,10652.160159999999,10650.969730000001,10639.490229999999,10622.410159999999,10655.820309999999,10670.740229999999,10693.51953,10841.820309999999,10846.29004,10884.509770000001,10895.070309999999,10813.940430000001,10849.75,10675.95996,10781.98047,10859.87988,10748.91992,10627.87988,10664.950199999999,10800.639649999999,10994.150390000001,11012.360350000001,11001.530269999999,11039.780269999999,11101.16992,11089.240229999999,11092.349609999999,11128.809569999999,11168.450199999999,11146.280269999999,11263.009770000001,11154.530269999999,11110.780269999999,10712.839840000001,10478.509770000001,10512.150390000001,10205.45996,9831.0302730000003,9950.8300780000009,10087.400390000001,10251.389649999999,10143.570309999999,9736.8203130000002,9196.5996090000008,9195.9296880000002,9152.5,8270.4404300000006,8367.5595699999994,8227.0800780000009,8493.0400389999995,8338.7402340000008,8782.2402340000008,8623.8603519999997,8160.7900390000004,8733.3203130000002,8989.1601559999999,9203.9804690000001,8996.3701170000004,9174.3896480000003,9311.9199219999991,9168.9804690000001,9270.9599610000005,9242.4404300000006,9462.3398440000001,9514.5996090000008,9432.3896480000003,9452.8300780000009,9538.6103519999997,9320.2001949999994,9439.9101559999999,9612.8300780000009,9785.2695309999999,9547.8496090000008,9630.5595699999994,9625.4804690000001,9625.6503909999992,9758.8203130000002,9889.4599610000005,9865.3203130000002],"text":["date: 2019-01-03<br />price:  8466.01","date: 2019-01-04<br />price:  8608.56","date: 2019-01-07<br />price:  8535.95","date: 2019-01-08<br />price:  8629.48","date: 2019-01-09<br />price:  8687.71","date: 2019-01-10<br />price:  8801.48","date: 2019-01-11<br />price:  8828.22","date: 2019-01-14<br />price:  8760.32","date: 2019-01-15<br />price:  8824.73","date: 2019-01-16<br />price:  8873.77","date: 2019-01-17<br />price:  8914.14","date: 2019-01-18<br />price:  9023.96","date: 2019-01-21<br />price:  9011.41","date: 2019-01-22<br />price:  8966.34","date: 2019-01-23<br />price:  8957.19","date: 2019-01-24<br />price:  8937.39","date: 2019-01-25<br />price:  8922.49","date: 2019-01-28<br />price:  8857.85","date: 2019-01-29<br />price:  8940.52","date: 2019-01-30<br />price:  8965.71","date: 2019-01-31<br />price:  8969.27","date: 2019-02-01<br />price:  8996.36","date: 2019-02-04<br />price:  9011.48","date: 2019-02-05<br />price:  9150.56","date: 2019-02-06<br />price:  9143.00","date: 2019-02-07<br />price:  9035.90","date: 2019-02-08<br />price:  9003.41","date: 2019-02-11<br />price:  9068.62","date: 2019-02-12<br />price:  9127.40","date: 2019-02-13<br />price:  9164.06","date: 2019-02-14<br />price:  9142.71","date: 2019-02-15<br />price:  9242.12","date: 2019-02-18<br />price:  9267.46","date: 2019-02-19<br />price:  9256.17","date: 2019-02-20<br />price:  9315.63","date: 2019-02-21<br />price:  9333.57","date: 2019-02-22<br />price:  9348.93","date: 2019-02-25<br />price:  9398.37","date: 2019-02-26<br />price:  9461.21","date: 2019-02-27<br />price:  9412.19","date: 2019-02-28<br />price:  9388.94","date: 2019-03-01<br />price:  9412.02","date: 2019-03-04<br />price:  9394.05","date: 2019-03-05<br />price:  9399.15","date: 2019-03-06<br />price:  9403.16","date: 2019-03-07<br />price:  9324.58","date: 2019-03-08<br />price:  9268.36","date: 2019-03-11<br />price:  9341.35","date: 2019-03-12<br />price:  9331.62","date: 2019-03-13<br />price:  9387.43","date: 2019-03-14<br />price:  9481.90","date: 2019-03-15<br />price:  9483.10","date: 2019-03-18<br />price:  9496.93","date: 2019-03-19<br />price:  9525.92","date: 2019-03-20<br />price:  9463.32","date: 2019-03-21<br />price:  9454.05","date: 2019-03-22<br />price:  9319.42","date: 2019-03-25<br />price:  9305.50","date: 2019-03-26<br />price:  9389.30","date: 2019-03-27<br />price:  9390.59","date: 2019-03-28<br />price:  9405.93","date: 2019-03-29<br />price:  9477.84","date: 2019-04-01<br />price:  9538.11","date: 2019-04-02<br />price:  9536.57","date: 2019-04-03<br />price:  9570.09","date: 2019-04-04<br />price:  9563.71","date: 2019-04-05<br />price:  9541.15","date: 2019-04-08<br />price:  9547.33","date: 2019-04-09<br />price:  9582.22","date: 2019-04-10<br />price:  9556.31","date: 2019-04-11<br />price:  9549.26","date: 2019-04-12<br />price:  9484.91","date: 2019-04-15<br />price:  9513.71","date: 2019-04-16<br />price:  9579.85","date: 2019-04-17<br />price:  9596.60","date: 2019-04-18<br />price:  9571.22","date: 2019-04-23<br />price:  9635.07","date: 2019-04-24<br />price:  9655.67","date: 2019-04-25<br />price:  9694.06","date: 2019-04-26<br />price:  9724.27","date: 2019-04-29<br />price:  9740.48","date: 2019-04-30<br />price:  9769.74","date: 2019-05-02<br />price:  9746.06","date: 2019-05-03<br />price:  9741.99","date: 2019-05-06<br />price:  9657.24","date: 2019-05-07<br />price:  9577.38","date: 2019-05-08<br />price:  9621.96","date: 2019-05-09<br />price:  9430.30","date: 2019-05-10<br />price:  9472.83","date: 2019-05-13<br />price:  9363.18","date: 2019-05-14<br />price:  9404.08","date: 2019-05-15<br />price:  9480.76","date: 2019-05-16<br />price:  9660.59","date: 2019-05-17<br />price:  9659.08","date: 2019-05-20<br />price:  9582.08","date: 2019-05-21<br />price:  9624.16","date: 2019-05-22<br />price:  9645.04","date: 2019-05-23<br />price:  9594.31","date: 2019-05-24<br />price:  9666.89","date: 2019-05-27<br />price:  9712.96","date: 2019-05-28<br />price:  9680.87","date: 2019-05-29<br />price:  9541.97","date: 2019-05-31<br />price:  9523.98","date: 2019-06-03<br />price:  9602.73","date: 2019-06-04<br />price:  9597.71","date: 2019-06-05<br />price:  9658.62","date: 2019-06-06<br />price:  9682.29","date: 2019-06-07<br />price:  9749.13","date: 2019-06-11<br />price:  9835.87","date: 2019-06-12<br />price:  9859.73","date: 2019-06-13<br />price:  9861.83","date: 2019-06-14<br />price:  9847.61","date: 2019-06-17<br />price:  9851.57","date: 2019-06-18<br />price:  9988.55","date: 2019-06-19<br />price:  9961.65","date: 2019-06-20<br />price:  9978.52","date: 2019-06-21<br />price:  9922.83","date: 2019-06-24<br />price:  9898.85","date: 2019-06-25<br />price:  9898.90","date: 2019-06-26<br />price:  9838.13","date: 2019-06-27<br />price:  9859.76","date: 2019-06-28<br />price:  9898.24","date: 2019-07-01<br />price:  9970.00","date: 2019-07-02<br />price: 10020.93","date: 2019-07-03<br />price: 10066.53","date: 2019-07-04<br />price: 10066.48","date: 2019-07-05<br />price:  9980.22","date: 2019-07-08<br />price:  9994.10","date: 2019-07-09<br />price:  9961.34","date: 2019-07-10<br />price:  9937.56","date: 2019-07-11<br />price:  9879.53","date: 2019-07-12<br />price:  9762.98","date: 2019-07-15<br />price:  9808.58","date: 2019-07-16<br />price:  9850.52","date: 2019-07-17<br />price:  9942.01","date: 2019-07-18<br />price: 10010.15","date: 2019-07-19<br />price:  9937.03","date: 2019-07-22<br />price:  9922.37","date: 2019-07-23<br />price:  9965.15","date: 2019-07-24<br />price:  9907.68","date: 2019-07-25<br />price:  9877.03","date: 2019-07-26<br />price:  9968.08","date: 2019-07-29<br />price:  9970.87","date: 2019-07-30<br />price:  9890.90","date: 2019-07-31<br />price:  9919.27","date: 2019-08-02<br />price:  9803.69","date: 2019-08-05<br />price:  9599.43","date: 2019-08-06<br />price:  9553.88","date: 2019-08-07<br />price:  9533.98","date: 2019-08-08<br />price:  9751.55","date: 2019-08-09<br />price:  9749.92","date: 2019-08-12<br />price:  9760.02","date: 2019-08-13<br />price:  9786.24","date: 2019-08-14<br />price:  9628.48","date: 2019-08-15<br />price:  9606.26","date: 2019-08-16<br />price:  9728.39","date: 2019-08-19<br />price:  9825.59","date: 2019-08-20<br />price:  9770.39","date: 2019-08-21<br />price:  9848.11","date: 2019-08-22<br />price:  9805.50","date: 2019-08-23<br />price:  9744.98","date: 2019-08-26<br />price:  9715.83","date: 2019-08-27<br />price:  9786.08","date: 2019-08-28<br />price:  9758.19","date: 2019-08-29<br />price:  9838.48","date: 2019-08-30<br />price:  9895.65","date: 2019-09-02<br />price:  9924.54","date: 2019-09-03<br />price:  9852.70","date: 2019-09-04<br />price:  9894.60","date: 2019-09-05<br />price:  9983.07","date: 2019-09-06<br />price: 10073.82","date: 2019-09-09<br />price: 10059.37","date: 2019-09-10<br />price: 10020.48","date: 2019-09-11<br />price: 10098.59","date: 2019-09-12<br />price: 10094.09","date: 2019-09-13<br />price: 10047.34","date: 2019-09-16<br />price:  9969.19","date: 2019-09-17<br />price: 10013.82","date: 2019-09-18<br />price: 10018.84","date: 2019-09-19<br />price: 10064.46","date: 2019-09-20<br />price: 10056.83","date: 2019-09-23<br />price:  9997.39","date: 2019-09-24<br />price:  9991.31","date: 2019-09-25<br />price:  9914.82","date: 2019-09-26<br />price: 10010.71","date: 2019-09-27<br />price: 10037.81","date: 2019-09-30<br />price: 10078.32","date: 2019-10-01<br />price:  9952.50","date: 2019-10-02<br />price:  9757.28","date: 2019-10-03<br />price:  9760.44","date: 2019-10-04<br />price:  9827.72","date: 2019-10-07<br />price:  9914.06","date: 2019-10-08<br />price:  9800.24","date: 2019-10-09<br />price:  9830.05","date: 2019-10-10<br />price:  9903.02","date: 2019-10-11<br />price: 10017.39","date: 2019-10-14<br />price:  9964.24","date: 2019-10-15<br />price: 10048.75","date: 2019-10-16<br />price: 10032.49","date: 2019-10-17<br />price: 10008.94","date: 2019-10-18<br />price:  9965.49","date: 2019-10-21<br />price:  9991.42","date: 2019-10-22<br />price: 10017.35","date: 2019-10-23<br />price: 10023.52","date: 2019-10-24<br />price: 10106.53","date: 2019-10-25<br />price: 10197.09","date: 2019-10-28<br />price: 10231.80","date: 2019-10-29<br />price: 10257.69","date: 2019-10-30<br />price: 10254.95","date: 2019-10-31<br />price: 10219.82","date: 2019-11-01<br />price: 10252.24","date: 2019-11-04<br />price: 10337.07","date: 2019-11-05<br />price: 10272.98","date: 2019-11-06<br />price: 10318.10","date: 2019-11-07<br />price: 10326.78","date: 2019-11-08<br />price: 10309.23","date: 2019-11-11<br />price: 10305.27","date: 2019-11-12<br />price: 10314.16","date: 2019-11-13<br />price: 10299.22","date: 2019-11-14<br />price: 10233.23","date: 2019-11-15<br />price: 10310.12","date: 2019-11-18<br />price: 10347.18","date: 2019-11-19<br />price: 10366.02","date: 2019-11-20<br />price: 10385.74","date: 2019-11-21<br />price: 10338.35","date: 2019-11-22<br />price: 10369.44","date: 2019-11-25<br />price: 10468.62","date: 2019-11-26<br />price: 10506.93","date: 2019-11-27<br />price: 10529.26","date: 2019-11-28<br />price: 10529.14","date: 2019-11-29<br />price: 10493.24","date: 2019-12-02<br />price: 10346.96","date: 2019-12-03<br />price: 10232.93","date: 2019-12-04<br />price: 10334.56","date: 2019-12-05<br />price: 10363.50","date: 2019-12-06<br />price: 10463.88","date: 2019-12-09<br />price: 10434.89","date: 2019-12-10<br />price: 10390.53","date: 2019-12-11<br />price: 10405.31","date: 2019-12-12<br />price: 10451.36","date: 2019-12-13<br />price: 10429.27","date: 2019-12-16<br />price: 10541.67","date: 2019-12-17<br />price: 10538.89","date: 2019-12-18<br />price: 10556.74","date: 2019-12-19<br />price: 10575.15","date: 2019-12-20<br />price: 10679.37","date: 2019-12-23<br />price: 10724.34","date: 2019-12-27<br />price: 10730.15","date: 2019-12-30<br />price: 10616.94","date: 2020-01-03<br />price: 10699.82","date: 2020-01-06<br />price: 10665.41","date: 2020-01-07<br />price: 10683.67","date: 2020-01-08<br />price: 10652.16","date: 2020-01-09<br />price: 10650.97","date: 2020-01-10<br />price: 10639.49","date: 2020-01-13<br />price: 10622.41","date: 2020-01-14<br />price: 10655.82","date: 2020-01-15<br />price: 10670.74","date: 2020-01-16<br />price: 10693.52","date: 2020-01-17<br />price: 10841.82","date: 2020-01-20<br />price: 10846.29","date: 2020-01-21<br />price: 10884.51","date: 2020-01-22<br />price: 10895.07","date: 2020-01-23<br />price: 10813.94","date: 2020-01-24<br />price: 10849.75","date: 2020-01-27<br />price: 10675.96","date: 2020-01-28<br />price: 10781.98","date: 2020-01-29<br />price: 10859.88","date: 2020-01-30<br />price: 10748.92","date: 2020-01-31<br />price: 10627.88","date: 2020-02-03<br />price: 10664.95","date: 2020-02-04<br />price: 10800.64","date: 2020-02-05<br />price: 10994.15","date: 2020-02-06<br />price: 11012.36","date: 2020-02-07<br />price: 11001.53","date: 2020-02-10<br />price: 11039.78","date: 2020-02-11<br />price: 11101.17","date: 2020-02-12<br />price: 11089.24","date: 2020-02-13<br />price: 11092.35","date: 2020-02-14<br />price: 11128.81","date: 2020-02-17<br />price: 11168.45","date: 2020-02-18<br />price: 11146.28","date: 2020-02-19<br />price: 11263.01","date: 2020-02-20<br />price: 11154.53","date: 2020-02-21<br />price: 11110.78","date: 2020-02-24<br />price: 10712.84","date: 2020-02-25<br />price: 10478.51","date: 2020-02-26<br />price: 10512.15","date: 2020-02-27<br />price: 10205.46","date: 2020-02-28<br />price:  9831.03","date: 2020-03-02<br />price:  9950.83","date: 2020-03-03<br />price: 10087.40","date: 2020-03-04<br />price: 10251.39","date: 2020-03-05<br />price: 10143.57","date: 2020-03-06<br />price:  9736.82","date: 2020-03-09<br />price:  9196.60","date: 2020-03-10<br />price:  9195.93","date: 2020-03-11<br />price:  9152.50","date: 2020-03-12<br />price:  8270.44","date: 2020-03-13<br />price:  8367.56","date: 2020-03-16<br />price:  8227.08","date: 2020-03-17<br />price:  8493.04","date: 2020-03-18<br />price:  8338.74","date: 2020-03-19<br />price:  8782.24","date: 2020-03-20<br />price:  8623.86","date: 2020-03-23<br />price:  8160.79","date: 2020-03-24<br />price:  8733.32","date: 2020-03-25<br />price:  8989.16","date: 2020-03-26<br />price:  9203.98","date: 2020-03-27<br />price:  8996.37","date: 2020-03-30<br />price:  9174.39","date: 2020-03-31<br />price:  9311.92","date: 2020-04-01<br />price:  9168.98","date: 2020-04-02<br />price:  9270.96","date: 2020-04-03<br />price:  9242.44","date: 2020-04-06<br />price:  9462.34","date: 2020-04-07<br />price:  9514.60","date: 2020-04-08<br />price:  9432.39","date: 2020-04-09<br />price:  9452.83","date: 2020-04-14<br />price:  9538.61","date: 2020-04-15<br />price:  9320.20","date: 2020-04-16<br />price:  9439.91","date: 2020-04-17<br />price:  9612.83","date: 2020-04-20<br />price:  9785.27","date: 2020-04-21<br />price:  9547.85","date: 2020-04-22<br />price:  9630.56","date: 2020-04-23<br />price:  9625.48","date: 2020-04-24<br />price:  9625.65","date: 2020-04-27<br />price:  9758.82","date: 2020-04-28<br />price:  9889.46","date: 2020-04-29<br />price:  9865.32"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,100,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[17874.900000000001,18405.099999999999],"y":[8900,8900],"text":"yintercept: 8900","type":"scatter","mode":"lines","line":{"width":3.7795275590551185,"color":"rgba(255,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":48.146118721461193,"r":7.3059360730593621,"b":52.29546946786229,"l":54.794520547945226},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Daily SMI prices","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[17874.900000000001,18405.099999999999],"tickmode":"array","ticktext":["Jan 19","Feb 19","Mär 19","Apr 19","Mai 19","Jun 19","Jul 19","Aug 19","Sep 19","Okt 19","Nov 19","Dez 19","Jan 20","Feb 20","Mär 20","Apr 20","Mai 20"],"tickvals":[17897,17928,17956,17987,18017,18048,18078,18109,18140,18170,18201,18231,18262,18293,18322,18353,18383],"categoryorder":"array","categoryarray":["Jan 19","Feb 19","Mär 19","Apr 19","Mai 19","Jun 19","Jul 19","Aug 19","Sep 19","Okt 19","Nov 19","Dez 19","Jan 20","Feb 20","Mär 20","Apr 20","Mai 20"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716894984},"tickangle":-45,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Date","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-675.78058620000002,14191.392310200001],"tickmode":"array","ticktext":["0","2000","4000","6000","8000","10000","12000"],"tickvals":[0,2000,4000.0000000000005,6000,8000,10000,12000],"categoryorder":"array","categoryarray":["0","2000","4000","6000","8000","10000","12000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716894984},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Daily Prices","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716894984}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"1d2c276a5f75":{"x":{},"y":{},"type":"scatter"},"1d2c5c2e6f26":{"yintercept":{}}},"cur_data":"1d2c276a5f75","visdat":{"1d2c276a5f75":["function (y) ","x"],"1d2c5c2e6f26":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>The values are depicted here:</p>
<div id="fig-under_8900" class="quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div id="2019" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data/last_value_2019.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Last value below 8900.- in 2019</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div id="2020" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="data/first_value_2020.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">First value below 8900.- in 2020</figcaption>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Screenshots of last and first values below 8900.- in 2019 and 2020, respectively.</figcaption><p></p>
</figure>
</div>
</section>
<section id="task-5-finding-the-two-dates-using-code" class="level2">
<h2 class="anchored" data-anchor-id="task-5-finding-the-two-dates-using-code">Task 5: Finding the two dates using code</h2>
<p>Since we are Data Scientists, we can automate this task and print the results.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>get_date_below_price <span class="ot">&lt;-</span> <span class="cf">function</span>(df, year, <span class="at">first_or_last =</span> <span class="st">"first"</span>, <span class="at">price_threshold =</span> <span class="dv">8900</span>){</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  checkmate<span class="sc">::</span><span class="fu">assert_data_frame</span>(df)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  checkmate<span class="sc">::</span><span class="fu">assert_int</span>(year)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  checkmate<span class="sc">::</span><span class="fu">assert_numeric</span>(price_threshold)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  checkmate<span class="sc">::</span><span class="fu">assert_character</span>(first_or_last)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  found_dates <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">year_extracted =</span> <span class="fu">year</span>(date)) <span class="sc">|&gt;</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year_extracted <span class="sc">==</span> year, price <span class="sc">&lt;</span> price_threshold) <span class="sc">|&gt;</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(date) <span class="sc">|&gt;</span> </span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(date)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (first_or_last <span class="sc">==</span> <span class="st">"first"</span>) {</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    found_date <span class="ot">&lt;-</span> found_dates <span class="sc">|&gt;</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">first</span>() <span class="sc">|&gt;</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">pull</span>()</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (first_or_last <span class="sc">==</span> <span class="st">"last"</span>) {</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    found_date <span class="ot">&lt;-</span> found_dates <span class="sc">|&gt;</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">last</span>() <span class="sc">|&gt;</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">pull</span>()</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(found_date)</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>last_2019 <span class="ot">&lt;-</span> <span class="fu">get_date_below_price</span>(df_smi, <span class="dv">2019</span>, <span class="at">first_or_last =</span> <span class="st">"last"</span>)</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>first_2020 <span class="ot">&lt;-</span> <span class="fu">get_date_below_price</span>(df_smi, <span class="dv">2020</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The last date with a price below 8900.- in 2019 was 2019-01-28.<br> The first date with a price bewlo 8900.- in 2020 was 2020-03-12.</p>
</section>
<section id="task-6-calculating-the-number-of-days-between-2019-01-28-and-2020-03-12" class="level2">
<h2 class="anchored" data-anchor-id="task-6-calculating-the-number-of-days-between-2019-01-28-and-2020-03-12">Task 6: Calculating the number of days between 2019-01-28 and 2020-03-12</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>number_of_days_diff <span class="ot">&lt;-</span> first_2020 <span class="sc">-</span> last_2019</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The Dirrerence is 409 days.</p>
</section>
<section id="task-7-weekly-means-as-scatter-plot" class="level2">
<h2 class="anchored" data-anchor-id="task-7-weekly-means-as-scatter-plot">Task 7: Weekly means as Scatter Plot</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tsibble)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>df_smi_wkly <span class="ot">&lt;-</span> df_smi_2019 <span class="sc">|&gt;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">week =</span> tsibble<span class="sc">::</span><span class="fu">yearweek</span>(date)) <span class="sc">|&gt;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(week) <span class="sc">|&gt;</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">wkly_means =</span> <span class="fu">mean</span>(price)) <span class="sc">|&gt;</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>plot_weekly_smi_means <span class="ot">&lt;-</span> df_smi_wkly <span class="sc">%&gt;%</span> </span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> week, <span class="at">y =</span> wkly_means)) <span class="sc">+</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Weekly SMI mean prices"</span>,</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">"Weekly mean prices"</span>) <span class="sc">+</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">6000</span>, <span class="dv">12000</span>, <span class="dv">1000</span>),</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">6000</span>, <span class="fu">max</span>(df_smi_wkly<span class="sc">$</span>wkly_means) <span class="sc">*</span> <span class="fl">1.2</span>),</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>                     <span class="at">minor_breaks =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>plot_weekly_smi_means</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="README_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
<section id="task-8-adding-daily-values" class="level2">
<h2 class="anchored" data-anchor-id="task-8-adding-daily-values">Task 8: Adding Daily values</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>plot_weekly_daily_smi <span class="ot">&lt;-</span> plot_weekly_smi_means <span class="sc">+</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> df_smi_2019,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> price),</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="fl">0.3</span>,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"pink"</span>,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">1</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>plot_weekly_daily_smi</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="README_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>df_smi_monthly <span class="ot">&lt;-</span> df_smi_2019 <span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> tsibble<span class="sc">::</span><span class="fu">yearmonth</span>(date)) <span class="sc">|&gt;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(month) <span class="sc">|&gt;</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">monthly_means =</span> <span class="fu">mean</span>(price)) <span class="sc">|&gt;</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>plot_monthly_smi_means <span class="ot">&lt;-</span> df_smi_monthly <span class="sc">%&gt;%</span> </span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> monthly_means)) <span class="sc">+</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Monthly SMI mean prices"</span>,</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">"Monthly mean prices"</span>) <span class="sc">+</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">6000</span>, <span class="dv">12000</span>, <span class="dv">1000</span>),</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">6000</span>, <span class="fu">max</span>(df_smi_monthly<span class="sc">$</span>monthly_means) <span class="sc">*</span> <span class="fl">1.2</span>),</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>                     <span class="at">minor_breaks =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>plot_monthly_smi_means</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="README_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>